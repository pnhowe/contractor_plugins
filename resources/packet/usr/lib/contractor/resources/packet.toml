sflinks = [ [ 'linux-base', 'packet-device-base' ], [ 'manual-structure-base', 'packet-device-base' ]  ]

[ foundation.packet-device-base ]
  description = 'Base Packet Device'
  scripts = { 'create' = 'packet-device-create', 'destroy' = 'packet-device-destroy' }
  foundation_types = [ 'Packet' ]
  template = {}
  physical_interface_names = []
[ foundation.packet-device-base.config_values ]
  packet_plan = '18e285e0-1872-11ea-8d71-362b9e155667'

[ script.packet-device-create ]
  description = 'Create Packet Device'
  script = """# Create Packet Device
device_spec = foundation.packet_devicespec

begin( description='Device Creation', expected_time=10:00 )
  device_uuid = packet.create( device_spec=device_spec )
  foundation.packet_uuid = device_uuid
  foundation.sync_networking_info()
  # foundation.wait_for_poweroff() right now packet dosen't support polling for power status that the API did not cause
  # so hard power it off
  delay( seconds=30 )
  foundation.power_off()
end

:done
"""

[ script.packet-device-destroy ]
  description = 'Destroy Packet Device'
  script = """# Destory Packet Device
begin( description='Device Destruction', expected_time=05:00 )
  foundation.power_off()
  foundation.destroy()
  foundation.packet_uuid = None
end
"""
